var bird;!function(t){var e=function(e){function i(){e.call(this),this.speed=2,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(i,e);var r=(__define,i),s=r.prototype;return s.onAddToStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var i=RES.getRes("fence_png");this.textureWidth=i.textureWidth;var r=i.textureHeight;this.rowCount=Math.ceil(this.stageW/this.textureWidth)+1,this.bmpArr=[];for(var s=0;s<this.rowCount;s++){var n=t.createBitmapByName("fence_png");n.x=this.textureWidth*s-(this.textureWidth*this.rowCount-this.stageW),n.y=this.stageH-r,this.bmpArr.push(n),this.addChild(n)}},s.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},s.enterFrameHandler=function(t){for(var e=0;e<this.rowCount;e++){var i=this.bmpArr[e];i.x-=this.speed,i.x<=-this.textureWidth&&(this.bmpArr.shift(),i.x=this.bmpArr[this.bmpArr.length-1].x+this.textureWidth,this.bmpArr.push(i))}},s.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},i}(egret.DisplayObjectContainer);t.BgMap=e,egret.registerClass(e,"bird.BgMap")}(bird||(bird={}));var bird;!function(t){var e=function(t){function e(e){t.call(this),this.texture=RES.getRes(e),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.birdRise,this),this.addEventListener(egret.Event.ENTER_FRAME,this.birdFail,this)}__extends(e,t);var i=(__define,e),r=i.prototype;return r.birdRise=function(){this.y-=6,this.x-=1},r.birdFail=function(){this.y+=1,this.x+=1},e}(egret.Bitmap);t.Bird=e,egret.registerClass(e,"bird.Bird")}(bird||(bird={}));var bird;!function(t){var e=function(t){function e(){t.call(this),this.textField=new egret.TextField,this.createView()}__extends(e,t);var i=(__define,e),r=i.prototype;return r.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},r.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);t.LoadingUI=e,egret.registerClass(e,"bird.LoadingUI")}(bird||(bird={}));var bird;!function(t){var e=function(e){function i(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(i,e);var r=(__define,i),s=r.prototype;return s.onAddToStage=function(e){this.loadingView=new t.LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},s.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},s.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},s.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},s.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},s.createGameScene=function(){this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var t=this.createBitmapByName("BG_day_png");this.addChild(t),t.width=this.stageW,t.height=this.stageH,this.btnStart=this.createBitmapByName("instructions_png"),this.btnStart.x=(this.stageW-this.btnStart.width)/2,this.btnStart.y=(this.stageH-this.btnStart.height)/2,this.btnStart.touchEnabled=!0,this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.gameStart,this),this.addChild(this.btnStart)},s.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},s.gameStart=function(){this.removeChild(this.btnStart),this.bg=new t.BgMap,this.addChild(this.bg),this.bg.start();var e=new t.Bird("birdie_png");this.addChild(e),e.x=this.stageW/2,e.y=this.stageH/2,e.touchEnabled=!0},i}(egret.DisplayObjectContainer);t.Main=e,egret.registerClass(e,"bird.Main")}(bird||(bird={}));var bird;!function(t){function e(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e}var i=function(){function t(){}var e=(__define,t);e.prototype;return t.hitTest=function(t,e){var i=t.getBounds(),r=e.getBounds();return i.x=t.x,i.y=t.y,r.x=e.x,r.y=e.y,i.intersects(r)},t}();t.GameUtil=i,egret.registerClass(i,"bird.GameUtil"),t.createBitmapByName=e}(bird||(bird={}));